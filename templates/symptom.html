<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/symptoms.css">
    <title> Enter Symptoms</title>
</head>
<body>
    <div class="header">
        <div class="nav">
          <div class="left-nav">
              <img class="logo" src="../static/img/Group 130.png" alt="logo">
              <ul class="nav-btn ulcontent">
                  <li><div class="home-outline"><a class="nav-item"  href="/" style="color: black;">Home</a></div></li>
                  <li><div class="about-outline"><a class="nav-item" href="/about">About</a></div></li>
                  <li><div class="services-outline"><a class="nav-item" href="/emergency">Services</a></div></li>
                  <li><div class="contact-outline"><a class="nav-item" href="/contact">Contact</a></div></li>
              </ul> 
             </div>
             <div class="right-nav">
              <ul class="log">
                  <li><div class="login-outline"><a class="login-signup" href="#" >Log in</a></div></li>
                  <li><div class="logout-outline"><a class="login-signup" href="">signup</a></div></li>
              </ul>
             </div>
        </div>
    </div>


    <div class="main-body">
        <div class="body">
            <div class="top-body">
                <div class="first boxx" >
                    <a class="patient" href="./info.html">Patient Info</a>
                </div>
                <div class="second boxx" style="background-color: #59AAB5;">
                    <a class="symptoms" href="./symptoms.html">Enter Symptoms</a>
                </div>
                <div class="third boxx">
                    <a class="disease" href="./disease.html">Probable Disease</a>
                </div>
                <div class="fourth boxx">
                    <a class="treatment" href="./treatment.html">Treatment</a>
                </div>
            </div>
           
            <div class="bottom-body">
                <img class="doc-img" src="../static/img/53efc602b1a165e637253bef8164edf9-removebg-preview.png" alt="">
                <h1 class="information">Enter your Symptoms</h1>
                <form id="symptomsForm" method="post" action="{% url 'process_symptoms' %}">
                    {% csrf_token %}
                    <!-- <label for="symptoms">Enter symptoms </label> -->
                    <input class="input-symptoms" type="text" id="symptoms" name="symptoms">
                    <br>
                    <button type="submit" class="continue">Submit</button>
                    <ul class="list"></ul>
                </form>
                
                <!-- <div class="continue"><a href="./disease.html">Continue</a></div>              -->
            </div>
        </div>
    </div>



    <div class="footer">
        <div class="top">
           <div class="top-left"> <h3 class="connected">Get Connected with us on social networks</h3>
        </div>
        <div class="top-right">
            <ul class="media">
                <li class="apps"><a href="#"><img src="../static/img/facebook.svg" alt=""></a></li>
                <li class="apps"><a href="#"><img src="../static/img/google.svg" alt=""></a></li>
                <li class="apps"><a href="#"><img src="../static/img/twitter.svg" alt=""></a></li>
                <li class="apps"><a href="#"><img src="../static/img/instagram.svg" alt=""></a></li>
                <li class="apps"><a href="#"><img src="../static/img/linkedin.svg" alt=""></a></li>
            </ul>
        </div>
        </div>
        <hr>
        <div class="bottom">
            <div class="box box1">
                <h3 class="company">SYMPTOMS CHECKER</h3>
                <h4 class="address">B14/10S Budhha park,<br>Kalyani 741235, west Bengal
                </h4>
            </div>
            <div class="box box2">
                <h3 class="company">USEFUL LINKS</h3>
                
                <a class="links" href="#">Orders</a><br>
                <a class="links" href="#">Settings</a>
            </div>
            <div class="box box3">
                <h3 class="company">CONTACT</h3>
                <h4 class="address">info@example.com <br>
                    +91 7598325876 <br>
                    +91 8753948538
                </h4>
            </div>
            <div class="box box4"></div>
        </div>
        <div class="terms">
            <ul class="policy">
                <li class="t&c"><a href="#">Privacy policy |</a></li>
                <li class="t&c"><a href="#">&nbsp;Terms of use |</a></li>
                <li class="t&c"><a href="#">&nbsp;Advertisement Policy</a></li>
            </ul>
        </div>
    </div>
    <script>
        // Function to fetch suggestions
        function fetchSuggestions(query) {
            fetch(`/get_suggestions?query=${query}`)
                .then(response => response.json())
                .then(data => {
                    const list = document.querySelector('.list');
                    list.innerHTML = ''; // Clear previous suggestions
        
                    data.forEach(suggestion => {
                        const listItem = document.createElement('li');
                        listItem.textContent = suggestion;
                        listItem.addEventListener('click', function() {
                            const inputField = document.getElementById('symptoms');
                            const cursorPosition = inputField.selectionStart;
                            const textBeforeCursor = inputField.value.substring(0, cursorPosition);
                            const textAfterCursor = inputField.value.substring(cursorPosition);
                            const lastCommaIndex = textBeforeCursor.lastIndexOf(',');
                            const textBeforeLastComma = textBeforeCursor.substring(0, lastCommaIndex + 1);
                            inputField.value = textBeforeLastComma + suggestion + textAfterCursor;
                            inputField.focus();
                            inputField.setSelectionRange(textBeforeLastComma.length + suggestion.length, textBeforeLastComma.length + suggestion.length);
                            list.innerHTML = '';
                        });
                        list.appendChild(listItem);
                    });
                })
                .catch(error => console.error('Error fetching suggestions:', error));
        }
        
        // Event listener for input field
        document.getElementById('symptoms').addEventListener('input', function(event) {
            const inputText = event.target.value.trim();
            const terms = inputText.split(',');
            const lastTerm = terms.pop().trim();
            if (lastTerm !== '') {
                fetchSuggestions(lastTerm);
            } else {
                const list = document.querySelector('.list');
                list.innerHTML = ''; // Clear suggestions if input is empty
            }
        });
    </script>
</body>
</html>
